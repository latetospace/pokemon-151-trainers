<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>151 Profiles</title>
  <style>
    :root {
      --bg: #0b0d12;
      --muted: #8b93a7;
      --text: #e8ecf6;
      --border: rgba(255,255,255,0.08);
      --link: #9fd3ff;
      --shadow: 0 10px 30px rgba(0,0,0,0.35);
      --radius: 16px;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      background: radial-gradient(1200px 600px at 30% -10%, rgba(71,121,255,0.25), transparent 60%),
                  radial-gradient(900px 500px at 80% 0%, rgba(255,95,179,0.18), transparent 55%),
                  var(--bg);
      color: var(--text);
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
    }
    header {
      position: sticky;
      top: 0;
      z-index: 10;
      backdrop-filter: blur(10px);
      background: rgba(11,13,18,0.6);
      border-bottom: 1px solid var(--border);
    }
    .wrap {
      max-width: 1200px;
      margin: 0 auto;
      padding: 18px 16px;
    }
    .topbar {
      display: flex;
      gap: 12px;
      align-items: center;
      justify-content: space-between;
      flex-wrap: wrap;
    }
    h1 { font-size: 18px; margin: 0; letter-spacing: 0.2px; }
    .controls { display: flex; gap: 10px; align-items: center; flex-wrap: wrap; }
    input[type="search"] {
      width: min(440px, 70vw);
      padding: 10px 12px;
      border-radius: 12px;
      border: 1px solid var(--border);
      background: rgba(255,255,255,0.06);
      color: var(--text);
      outline: none;
    }
    input[type="search"]::placeholder { color: rgba(232,236,246,0.55); }

    .grid {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 12px;
      padding: 16px;
    }
    @media (min-width: 640px) { .grid { grid-template-columns: repeat(3, minmax(0, 1fr)); } }
    @media (min-width: 900px) { .grid { grid-template-columns: repeat(5, minmax(0, 1fr)); } }
    @media (min-width: 1100px){ .grid { grid-template-columns: repeat(6, minmax(0, 1fr)); } }

    .card {
      background: linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.03));
      border: 1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow: hidden;
      padding: 12px;
      display: flex;
      flex-direction: column;
      gap: 10px;
      min-height: 210px;
    }
    .row { display: flex; gap: 10px; align-items: center; }
    .sprite {
      width: 64px; height: 64px;
      border-radius: 14px;
      background: rgba(255,255,255,0.06);
      border: 1px solid var(--border);
      display: grid; place-items: center;
      flex: 0 0 auto;
    }
    .sprite img { width: 56px; height: 56px; image-rendering: pixelated; }
    .meta { display: flex; flex-direction: column; gap: 4px; min-width: 0; }
    .name {
      font-weight: 650; font-size: 14px; margin: 0; line-height: 1.1;
      white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
    }
    .dex { font-size: 12px; color: var(--muted); }

    .links { display: flex; gap: 10px; flex-wrap: wrap; }
    .links a {
      font-size: 12px;
      text-decoration: none;
      color: var(--link);
      border: 1px solid rgba(159,211,255,0.25);
      background: rgba(159,211,255,0.08);
      padding: 6px 10px;
      border-radius: 999px;
    }
    .links a[aria-disabled="true"] { opacity: 0.45; pointer-events: none; }

    .collector {
      margin-top: 2px;
      font-size: 12px;
      color: var(--muted);
      border-top: 1px solid rgba(255,255,255,0.06);
      padding-top: 10px;
    }
    .collector span { color: var(--text); font-weight: 600; }

    .footer {
      color: var(--muted);
      font-size: 12px;
      padding: 0 16px 22px;
      max-width: 1200px;
      margin: 0 auto;
    }
  </style>
</head>

<body>
  <header>
    <div class="wrap topbar">
      <h1>151 Profiles (Mockup)</h1>
      <div class="controls">
        <input id="search" type="search" placeholder="Search Pokémon (e.g., pikachu, #25)" />
      </div>
    </div>
  </header>

  <main class="wrap" style="padding:0;">
    <div id="grid" class="grid" aria-live="polite"></div>
  </main>

  <div class="footer">
    Images use public sprite URLs (swap for your own). Social links come from profiles.json.
  </div>

  <script>
    const names = [
      "Bulbasaur","Ivysaur","Venusaur","Charmander","Charmeleon","Charizard",
      "Squirtle","Wartortle","Blastoise","Caterpie","Metapod","Butterfree",
      "Weedle","Kakuna","Beedrill","Pidgey","Pidgeotto","Pidgeot",
      "Rattata","Raticate","Spearow","Fearow","Ekans","Arbok",
      "Pikachu","Raichu","Sandshrew","Sandslash","Nidoran♀","Nidorina","Nidoqueen",
      "Nidoran♂","Nidorino","Nidoking","Clefairy","Clefable","Vulpix","Ninetales",
      "Jigglypuff","Wigglytuff","Zubat","Golbat","Oddish","Gloom","Vileplume",
      "Paras","Parasect","Venonat","Venomoth","Diglett","Dugtrio","Meowth","Persian",
      "Psyduck","Golduck","Mankey","Primeape","Growlithe","Arcanine","Poliwag","Poliwhirl","Poliwrath",
      "Abra","Kadabra","Alakazam","Machop","Machoke","Machamp","Bellsprout","Weepinbell","Victreebel",
      "Tentacool","Tentacruel","Geodude","Graveler","Golem","Ponyta","Rapidash",
      "Slowpoke","Slowbro","Magnemite","Magneton","Farfetch'd","Doduo","Dodrio","Seel","Dewgong",
      "Grimer","Muk","Shellder","Cloyster","Gastly","Haunter","Gengar","Onix",
      "Drowzee","Hypno","Krabby","Kingler","Voltorb","Electrode","Exeggcute","Exeggutor",
      "Cubone","Marowak","Hitmonlee","Hitmonchan","Lickitung","Koffing","Weezing","Rhyhorn","Rhydon",
      "Chansey","Tangela","Kangaskhan","Horsea","Seadra","Goldeen","Seaking",
      "Staryu","Starmie","Mr. Mime","Scyther","Jynx","Electabuzz","Magmar","Pinsir","Tauros",
      "Magikarp","Gyarados","Lapras","Ditto","Eevee","Vaporeon","Jolteon","Flareon",
      "Porygon","Omanyte","Omastar","Kabuto","Kabutops","Aerodactyl","Snorlax",
      "Articuno","Zapdos","Moltres","Dratini","Dragonair","Dragonite","Mewtwo","Mew"
    ];

    const grid = document.getElementById("grid");
    const search = document.getElementById("search");

    const spriteUrl = (id) =>
      `https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/${id}.png`;

    function pad3(n) { return String(n).padStart(3, "0"); }

    function safeStr(v) { return (typeof v === "string" ? v.trim() : ""); }

    function linkPill(label, url) {
      const u = safeStr(url);
      if (!u) return `<a href="#" aria-disabled="true" title="No ${label} linked">${label}</a>`;
      return `<a href="${u}" target="_blank" rel="noopener noreferrer">${label}</a>`;
    }

    function buildCard(id, name, profile, defaultCollector) {
      const p = profile || {};
      const collectorName = safeStr(p.collectorName) || defaultCollector || "Unclaimed";

      const card = document.createElement("article");
      card.className = "card";
      card.dataset.id = id;
      card.dataset.name = name.toLowerCase();

      card.innerHTML = `
        <div class="row">
          <div class="sprite" aria-hidden="true">
            <img loading="lazy" alt="${name} sprite" src="${spriteUrl(id)}" />
          </div>
          <div class="meta">
            <p class="name">${name}</p>
            <div class="dex">#${pad3(id)}</div>
          </div>
        </div>

        <div class="links" role="list">
          ${linkPill("Instagram", p.instagram)}
          ${linkPill("TikTok", p.tiktok)}
          ${linkPill("X", p.x)}
        </div>

        <div class="collector">Collector: <span>${collectorName}</span></div>
      `;
      return card;
    }

    let loaded = { defaultCollector: "Unclaimed", profiles: {} };

    async function loadProfiles() {
      try {
        const res = await fetch("./profiles.json", { cache: "no-store" });
        if (!res.ok) throw new Error(`profiles.json fetch failed: ${res.status}`);
        const json = await res.json();
        loaded.defaultCollector = safeStr(json.defaultCollector) || "Unclaimed";
        loaded.profiles = (json && json.profiles && typeof json.profiles === "object") ? json.profiles : {};
      } catch (e) {
        console.warn("Using empty profiles because profiles.json could not be loaded.", e);
        loaded = { defaultCollector: "Unclaimed", profiles: {} };
      }
    }

    function render(filter = "") {
      const f = filter.trim().toLowerCase();
      grid.innerHTML = "";

      let numeric = null;
      const m = f.match(/^#?(\d{1,3})$/);
      if (m) numeric = Number(m[1]);

      for (let i = 1; i <= 151; i++) {
        const name = names[i - 1];
        const matches =
          !f ||
          (numeric !== null && i === numeric) ||
          name.toLowerCase().includes(f);

        if (!matches) continue;

        const profile = loaded.profiles[String(i)];
        grid.appendChild(buildCard(i, name, profile, loaded.defaultCollector));
      }
    }

    (async function init() {
      await loadProfiles();
      render();
      search.addEventListener("input", (e) => render(e.target.value));
    })();
  </script>
</body>
</html>
